# API Testing Demo (Postman + Newman + Docker)

![API Tests (Docker)](https://github.com/jessicazhong004/api-testing-demo/actions/workflows/api-docker.yml/badge.svg)
![API Tests (Newman)](https://github.com/jessicazhong004/api-testing-demo/actions/workflows/newman.yml/badge.svg)

## What is this?

Small API testing demo that runs a Postman collection with Newman:
- locally with `npm run test:api`
- inside a Docker container
- in GitHub Actions CI

## Why it matters

- Uses a **single entry point** (`npm run test:api`) reused in local, Docker, and CI.
- Keeps tests in a **consistent environment** (Docker) to reduce “works on my machine” issues.
- Produces a **HTML report** and uploads it as a CI artifact for easy inspection.

## Tech stack

- Postman collection + environment (JSON files under `postman/`)
- Newman CLI (run via npm script)
- Node.js + npm
- Docker (containerized Newman run)
- GitHub Actions (CI for both host-based and Docker-based runs)

## Project structure

```text
api-testing-demo/
  postman/
    api_tests.postman_collection.json
    local.postman_environment.json
  reports/
    report.html             # generated by Newman
  .github/
    workflows/
      newman.yml            # run Newman on the host
      api-docker.yml        # build image + run tests in Docker
  Dockerfile
  package.json
  README.md
  ```

## How to run

### Local

```bash
npm ci
npm run test:api
```
This will generate a HTML report at:
```text
reports/report.html
```
**Docker**
```bash
docker build -t api-testing-demo .
docker run --rm \
  -v "$PWD/reports:/app/reports" \
  api-testing-demo
```
The container run will also write the HTML report to:
```text
reports/report.html
```
**CI (GitHub Actions)**
Two workflows live in `.github/workflows`:
* `newman.yml` – installs Newman globally and runs the Postman collection on the host.
* `api-docker.yml` – builds the Docker image and runs the tests inside a container, mounting reports/.
Both workflows upload the same HTML report as an artifact named:
```text
newman-report
```
You can find it under:

  GitHub → Actions → select a run → Artifacts → `newman-report`

```md
## What this demo validates

- JSONPlaceholder `/posts` basic flows:
  - Smoke `GET /posts/1` (200)
  - Create `POST /posts` (201)
  - Negative `GET /posts/999999` (404)
- Status codes and basic response fields (e.g. `id`, `title`, `body`)
- Same Newman run reused:
  - on your machine
  - inside a Docker container
  - in GitHub Actions
  ```

## What you'll see when you run it

- Locally: `npm run test:api` prints Newman's summary in the terminal and writes `reports/report.html`.
- In CI: each workflow uploads the HTML report (`reports/report.html`) as the `newman-report` artifact.

## Next steps (future improvements)

- Add a couple more endpoints (PUT / DELETE) for fuller CRUD coverage
- Introduce basic data-driven tests (e.g. table of input/expected status)
- Optionally add schema-style assertions for critical fields