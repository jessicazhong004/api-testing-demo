# API Testing Demo (Postman + Newman + Docker + CI)

![API Tests (Docker)](https://github.com/jessicazhong004/api-testing-demo/actions/workflows/api-docker.yml/badge.svg)
![API Tests (Newman)](https://github.com/jessicazhong004/api-testing-demo/actions/workflows/newman.yml/badge.svg)

## What is this?

This repo is a small but realistic API testing demo.  
It uses Postman + Newman, runs locally and in Docker, and is wired into GitHub Actions CI.  
The target API is JSONPlaceholder (a public fake REST API), just like a typical internal service in a real project.

## Why it matters

- Uses a **single entry point** (`npm run test:api`) reused in local, Docker, and CI.
- Keeps tests in a **consistent environment** (Docker) to reduce “works on my machine” issues.
- Produces a **HTML report** and uploads it as a CI artifact for easy inspection.

## Tech stack

- Postman collection + environment (JSONPlaceholder endpoints)
- Newman CLI (runs the collection from CLI / CI)
- Node.js + npm scripts (single entry command)
- Docker (containerized test run)
- GitHub Actions (CI pipeline for both host-based and Docker-based runs on every push)

## Project structure

```text
api-testing-demo/
  postman/
    api_tests.postman_collection.json
    local.postman_environment.json
  reports/
    report.html             # generated by Newman
  .github/
    workflows/
      newman.yml            # run Newman on the host
      api-docker.yml        # build image + run tests in Docker
  Dockerfile
  package.json
  README.md
  ```

## How to Run Locally

Prerequisite: Node.js (v18+ or v20) and npm installed.

Install dependencies (one time or when `package-lock.json` changes):

```bash
npm ci
npm run test:api
```
This will generate a HTML report at:
```text
reports/report.html
```
What this does:
- Runs the Postman collection in `postman/api_tests.postman_collection.json`
- Uses the environment `postman/local.postman_environment.json`
- Generates / updates an HTML report under:
```Plain text
reports/report.html
```
You can open that file in a browser to see a visual test report.

## How to Run in Docker
Build the image:
```bash
docker build -t api-testing-demo .
```
Run the tests inside a container:
```bash
docker run --rm api-testing-demo
```
This will:
- Install dependencies (from `package.json` / `package-lock.json`)
- Run `npm run test:api` inside the container
- Exit with code 0 on success, non-zero on failures (suitable for CI)

## CI (GitHub Actions)
Two workflows live in `.github/workflows`:
* `newman.yml` – installs Newman globally and runs the Postman collection on the host.
* `api-docker.yml` – builds the Docker image and runs the tests inside a container, mounting reports/.
Both workflows upload the same HTML report as an artifact named:
```text
newman-report
```
You can find it under:

  GitHub → Actions → select a run → Artifacts → `newman-report`

On every push (and pull request), GitHub Actions will:
- Check out the code
- Install Node.js and dependencies
- Run the Newman tests via `npm run test:api`

The goal is to keep the pipeline green and show a realistic “tests in CI” setup.

## Test Artifacts

- Newman HTML report: `reports/report.html`
- Postman collection: `postman/api_tests.postman_collection.json`
- Postman environment: `postman/local.postman_environment.json`

## What this demo validates

- JSONPlaceholder `/posts` basic flows:
  - Smoke `GET /posts/1` (200)
  - Create `POST /posts` (201)
  - Negative `GET /posts/999999` (404)
- Status codes and basic response fields (e.g. `id`, `title`, `body`)
- Same Newman run reused:
  - on your machine
  - inside a Docker container
  - in GitHub Actions

## What you'll see when you run it

- Locally: `npm run test:api` prints Newman's summary in the terminal and writes `reports/report.html`.
- In CI: each workflow uploads the HTML report (`reports/report.html`) as the `newman-report` artifact.

## Possible Next steps (Future Work)
For v1.0, this repo is intentionally kept small and focused.
Future extensions (not in scope yet):
- Add more negative / edge case scenarios
- Add simple schema validations
- Parameterize environments (local / CI / other)